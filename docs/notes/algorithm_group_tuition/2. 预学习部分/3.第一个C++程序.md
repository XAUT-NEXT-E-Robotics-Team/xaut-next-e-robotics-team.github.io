---
title: 第一个C++程序
createTime: 2025/08/11 23:29:38
permalink: /docs/algorithm_group_tuition/fjd7fxgm/
---
<!--
 *  _   _  _______   _______   _____  
 * | \ | ||  ___\ \ / /_   _| |  ___| 
 * |  \| || |__  \ V /  | |   | |__   
 * | . ` ||  __| /   \  | |   |  __|  
 * | |\  || |___/ /^\ \ | |   | |___  
 * \_| \_/\____/\/   \/ \_/   \____/  
 * 
 * @Author: ziyu (Chen Zhaoyu)
 * @Date: 2025-08-11 23:29:38
 * @LastEditors: ziyu (Chen Zhaoyu)
 * @LastEditTime: 2025-08-11 23:30:57
 * @Description: 
 * Copyright (c) 2025 by XAUT NEXT-E/ziyu, All Rights Reserved. 
-->

1.gcc 编写一个简单的程序

<span data-type="text" style="background-color: var(--b3-font-background12);">gcc安装命令：</span>  
sudo apt-get install gcc

[C++](https://c.biancheng.net/cplus/) 和C语言类似，也要经过编译和链接后才能运行。

下图是 C/C++ 代码生成可执行文件的过程：  
​![C语言和C生成可执行程序的过程](https://c.biancheng.net/uploads/allimg/190212/1015294446-0.jpg)

对于c/c++编程，从源代码文件变成可执行文件，大致需要以下几步：

- 预处理 (Pre-Processing)  
  预处理器处理#include、#​define等内容，把头文件复制到源文件中等。
- 编译 (Compiling)  
  得到以汇编语言写的，可读的文件。
- 汇编 (Assembling)  
  得到二进制格式，不可读的文件。  
  编译和汇编主要是分析源代码中的内容，然后转换为目标文件。
- 链接 (Linking)  
  静态库和动态库的处理体现在链接过程中，链接器把目标文件和库一起打包变成可执行文件。

‍

## gcc

在C语言中，我们使用`gcc`​命令来编译和链接C程序。

例如编译单个源文件：gcc main.c

编译多个源文件：gcc main.c module.c

编译C++程序时，`gcc`​命令也可以使用，不过要增加`-lstdc++`​选项，否则会发生链接错误。

例如编译单个源文件：gcc main.cpp -lstdc++

编译多个源文件：gcc main.cpp module.cpp -lstdc++

​`gcc`​命令在链接时默认使用C的库，只有添加了`-lstdc++`​选项才会使用 C++ 的库。

### g++

GCC 中还有一个`g++`​命令，它专门用来编译 C++ 程序。`g++`​命令和`gcc`​命令的用法如出一辙。

例如编译单个源文件：g++ main.cpp

编译多个源文件：g++ main.cpp module.cpp

使用`-o`​选项可以指定可执行文件的名称：g++ main.cpp -o demo  
./demo

在以后使用 Linux GCC 时，推荐使用`g++`​命令来编译 C++ 程序，这样更加简洁和规范。

# 2.cmake + make 实现一个简单的多文件程序

- **用CMake创建项目**  
  为什么要使用CMake？理论上说,任意一个C++程序都可以用g++来编译。但当程序规模越来越大时,一个工程可能有许多个文件夹和源文件,这时输入的编译命令将越来越长。通常一个小型Ｃ++项目可能含有十几个类，各类间还存在着复杂的依赖关系。其中一部分要编译成可执行文件，另一部分要编译成库文件。如果仅靠g++命令，我们需要输入大量的编译指令，整个编译过程会变得异常繁琐。因此，对于C++项目，使用一些工程管理工具会更加高效。历史上工程师们曾使用makefile进行自动编译，但cmake要比它更加方便。  
  在一个cmake工程中，用cmake命令生成一个makefile文件，然后用make命令根据这个makefile文件的内容编译整个工程。

使用CMake创建项目有两种方法：直接手动构建CMakeList；在VS code中通过快捷键生成CMakeList，然后在此基础上修改。

- 直接手动构建CMakeList（具体方法如下，请自行阅读）
  
  https://blog.csdn.net/Tengfei_Y/article/details/126893402?fromshare=blogdetail&sharetype=blogdetail&sharerId=126893402&sharerefer=PC&sharesource=2401_89349528&sharefrom=from_link
  
- 在VS code中通过快捷键生成CMakeList
  
  [https://blog.csdn.net/Nine_Yao/article/details/124609626?fromshare=blogdetail&amp;sharetype=blogdetail&amp;sharerId=124609626&amp;sharerefer=PC&amp;sharesource=2401_89349528&amp;sharefrom=from_link](https://blog.csdn.net/Nine_Yao/article/details/124609626?fromshare=blogdetail&sharetype=blogdetail&sharerId=124609626&sharerefer=PC&sharesource=2401_89349528&sharefrom=from_link)
  

至此，你已经学会了使用gcc,cmake来编译c++程序，让我们以饱满的热情和坚毅的步伐继续完成后面的培训内容吧！